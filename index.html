<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="img/icon.png">
<title>Mamu Trading Tagebuch</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
<style>
/*=================================================
BASIS (HTML / BODY)
=================================================== */

html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
    background-color: #000;
}

/* Scrollen NUR blockieren, wenn das Cover offen ist */
body.cover-open {
    height: 100dvh;
    overflow: hidden;
}

/* Scrollen ERLAUBEN, sobald die Page offen ist */
body.page-open {
    overflow-y: auto;
}

.buch-cover {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    /* dynamic viewport height f√ºllt den Bereich inkl. Leisten aus */
    height: 100dvh; 
    
    /* Sorgt daf√ºr, dass das Bild das Display f√ºllt ohne zu verzerren */
    object-fit: cover; 
    
    /* Sicherheitsma√ünahme f√ºr √§ltere iOS Versionen */
    padding-bottom: env(safe-area-inset-bottom);
}



/*==================================================
  TYPOGRAFIE
  ================================================== */
/* h1 { margin:0 0 15px 0; font-size:36px; color:gold; text-align:center; text-shadow: 1px 1px 2px #b8860b; font-family:'Palatino Linotype','Book Antiqua', Palatino, serif; } */
.container h2 { margin:10px 0 5px; font-size:18px; color:#5b3a21; }

/*==================================================
  TABELLEN
  ================================================== */


.container table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 5px;
  table-layout: fixed;
  font-size: 14px;
  background: rgba(255,255,255,0.8);
  border-radius: 5px;
}

.container th,
.container td {
  border: 1px solid #aa845c;
  padding: 4px 6px;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.container th {
  background: #e6d9c1;
}

.container td.name-cell {
  text-align: left;
  padding-left: 6px;
}


.container table input[type=number],
.container table input[type=text] {
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid #aa845c;
  border-radius: 4px;
  background: #ffffff;
  text-align: center; 
}


/* =========================
   Backup-Bereich
   ========================= */

.backup-container {
  display: flex;
  justify-content: center;

  gap: 16px;

  margin-left: 24px;   /* üëà HIER SPIELEN */
  margin-right: 24px;

  /* alternativ sp√§ter:
     padding-left / padding-right
  */
}




 
 .cash-row {
  display: grid;
  grid-template-columns: auto 1fr 100px 160px;    /*  auto 1fr Breite Zahlenfeld position */
  align-items: center;
 }
 
 

/* Basis f√ºr alle Labels ( Cash und Gesamtwert)*/

.cash-label {
  height: 28px;
  line-height: 18px;
  padding: 0 12px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  border: 1px solid #aa845c;
  border-radius: 6px;
  background: #e6d9c1;

  font-size: 14px;
  font-weight: 600;
  font-family: "Palatino Linotype", Palatino, serif;
  color: #5b3a21;

  width: 110px;      /* Standardbreite */
  flex-shrink: 0;   /* verhindert Mitziehen */
  white-space: nowrap;
}

/* kurze Variante: Cash */                 
.cash-label--short {
  width: 30px;
}

/* lange Variante: Gesamtwert */
.cash-label--long {
  width: 72px;
}
  
  .cash-button {
  cursor: pointer;
}

.cash-button:hover {
  filter: brightness(1.05);
}
  


.cash-display {

  height: 24px;                  /* NEU 28.01 28px */
  min-height: 24px;              /*     by    28px */
/*  line-height: 24px; */        /*    Mamu   24px */   

  grid-column: 3;
  justify-self: end;
  
  width: 100%;
  max-width: 100%;
  
  font-family: "Palatino Linotype", Palatino, serif;
  font-size: 16px;
  text-align: right;

  padding: 2px 10px;
  line-height: 1.0;               /* NEU 28.01   alter Wert 1.2  */
  
  color: #000;
  -webkit-text-fill-color: #000;   /* iOS fix */
  
  appearance: none;
  -webkit-appearance: none;

  background: #fffdf9;
  border: 1px solid #aa845c;
  border-radius: 6px;

  box-sizing: border-box;
  cursor: pointer;

  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
  
}

/* =========================
   Gesamtwert ‚Äì Zahlenfeld
   ========================= */

.total-input {

  height: 24px;                  /* NEU 28.01 */
  min-height: 24px;              /*     by    */
/*  line-height: 24px;  */       /*    Mamu   */   

  grid-column: 3;
  justify-self: end;
 
  font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
  font-size: 16px;
  text-align: right;
  width: 100%;
  max-width: 100%;
  
  padding: 2px 10px;
  
  line-height: 1.0;

  background: #fffdf9;
  border: 1px solid #aa845c;
  border-radius: 6px;

  box-sizing: border-box;
 
 font-variant-numeric: tabular-nums;
 font-feature-settings: "tnum";
 
}


/* =========================
   Dezenter Texttr√§ger
   =========================     hinterlegt einen dezenten Farbbalken hinter Text zu Besseren Sichtbarkeit auf der Page    */
/*
.section-label {
  display: inline-block;
  padding: 2px 8px;

  background: rgba(255, 255, 255, 0.85);
  border-radius: 4px;

  font-size: 14px;
  font-weight: 600;
  color: #5b3a21;

  box-shadow: 0 0 0 1px rgba(170, 132, 92, 0.35);
  
  
}
*/


.paste-hint {
  font-size: 13px;
  color: #5b3a21;
  opacity: 0.6;
 
  pointer-events: none;     /* kein Klick, kein Fokus */
  user-select: none;        /* nicht markierbar */
  -webkit-user-select: none;
  -webkit-touch-callout: none;

}


.section-label {
  display: inline;
  padding: 0px 4px;
  
  background: rgba(230, 217, 193, 0.55);

/*  background: rgba(255, 255, 255, 0.55);   */
  border-radius: 2px;

  color: #5b3a21;
  
  margin-top: 4px;         /* Abstand zum vorherigen Balken */
  margin-bottom: 4px;      /* Abstand nach Unten */
  
}



.edit-input {
 font-size: 16px;          /* verhindert iOS- Zoom */
 line-height: 1.2;
}


/*==================================================
  BUTTONS
  ================================================== */
  
#cover {
  position: fixed;
  inset: 0;

  width: 100%;
  height: 100dvh;
  min-height: 100%;

  background-image: url('img/cover.png');
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;

  padding-bottom: env(safe-area-inset-bottom);

  cursor: pointer;
  z-index: 10;

  transition: transform 0.6s ease, opacity 0.6s ease;
}


#cover:hover {
  transform: scale(1.02);
}

/* .diff-bar margin-bottom Xpx stellt den Abstand zur n√§chsten Zeile/ Objekt      */

.diff-bar { height:26px; margin-top:5px; margin-bottom:8px; background: transparent; position:relative; border-radius:4px; overflow:hidden; }
.diff-fill { height:100%; position:absolute; left:0; top:0; border-radius:4px; text-align:center; color:white; font-size:14px; font-weight:bold; line-height:26px; transition: width 0.8s; }
.flex-item { margin-bottom:15px; }
.add-container, .update-container {
 width:100%;
 max-width: 310px;
 margin: 0 auto 10px;
 display:none;
 flex-direction:column;
 margin-bottom:10px;
 padding:8px;
 border-radius:5px;
 background:rgba(255,255,255,0.9);
}

.update-container { padding:10px; }



.update-row {
  display: flex;
  align-items: center;
  gap: 16px;              /* Abstand statt margin-left */
  margin: 4px 0;
}

.update-row label {
  flex: 0 0 50%;                /* Feld verschieben*/
  padding-left: 6px;
  font-weight: 600;
  color: #5b3a21;
}

.update-row input {
  width: 72px;            /* HIER steuerst du die Feldbreite */
  flex-shrink: 0;         /* nicht kleiner schrumpfen */
  text-align: center;
  border: 1px solid #aa845c;
  border-radius: 4px;
  background: #fff8f0;
}


.popup { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:1000; }
.popup-content { background:#fdf5e6; padding:20px; border-radius:5px; width:80%; max-width:300px; display:flex; flex-direction:column; gap:10px; }
.popup-content input { font-size:18px; text-align:center; border:1px solid #aa845c; border-radius:4px; background:#fff8f0; }
.popup-content button { font-size:16px; padding:6px; cursor:pointer; border-radius:5px; background:#b8860b; color:white; border:none; transition: background 0.3s ease; }
.popup-content button:hover { background:#a97500; }

.button-container { display:flex; gap:4%; justify-content:center; margin-top: 10px; margin-bottom:20px; }    /* margin-top: 20px neu eingef√ºgt */

/* =========================
   Buttons ‚Äì NEU & SAUBER
   ========================= */

.button-add {
  background: linear-gradient(
    180deg,
    #c06a3a,
    #a0522d
  );
  color: #fff;
  border: none;
  padding: 8px;
  font-size: 17px;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
}

.button-add:hover {
  background: linear-gradient(
    180deg,
    #d57b48,
    #b35b34
  );
}


.button-update {
  background: linear-gradient(
    180deg,
    #e2a76f,
    #cd853f
  );
  color: #fff;
  border: none;
  padding: 8px;
  font-size: 17px;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
}

.button-update:hover {
  background: linear-gradient(
    180deg,
    #f0b982,
    #d89049
  );
}




.button-del {
  background: linear-gradient(180deg, #a83232, #6b1e1e);
  color: #fff;
  border: none;
  padding: 4px;
  font-size: 12px;
  border-radius: 4px;
  cursor: pointer;
}

.button-del:hover {
  background: linear-gradient(180deg, #c04444, #822424);
}
.button-danger {
  background: linear-gradient(180deg, #a83232, #6b1e1e);
  color: #ffffff;
  opacity: 0.9;
  letter-spacing: 0.3px;
}

.button-danger:hover {
  opacity: 1;
}

.button-export {
  background: linear-gradient(
    180deg,
    #285a3f,                             /* #b08a5a,           helles Bronze  */
    #0b4b31                              /* #7a5734            dunkles Kupfer */ 
  );
  color: #fff;
}

 /*   #c06a3a,    #a0522d  */


.button-import {
  background: linear-gradient(180deg, #e2a76f, #cd853f);
  color: #fff;
}




/* =========================
   Alles l√∂schen ‚Äì Warn-Button
   ========================= */
   
.danger-zone {
  margin-top: 40px;
  padding-top: 16px;

  border-top: 1px solid rgba(255,255,255,0.25);

  display: flex;
  justify-content: center;
}




.footer-actions {
  display: flex;
  justify-content: center;   /* nicht links, nicht rechts ‚Äì bewusst */
  gap: 25px;
  margin-top: 30px;
  padding-top: 16px;
  
  
}


.footer-actions button {

  flex: 1 1 0;           /* sorgt f√ºr gleichbleibende Breite */
  max-width: 80px;      /* Testen */

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;

  inline-size: auto;
  padding-block: 8px;         /* H√∂he */
  padding-inline: 6px;        /* Breite */
  border-radius: 6px;
  font-family: "Palatino Linotype", Palatino, serif;
  font-size: 14px;
  line-height: 1.2;
  text-align: center;
  border: none;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.35);
  opacity: 0.9;                /* dein ruhiger Look */
  transition: all 0.2s ease;
}

.footer-actions button:hover {
  opacity: 1;
  transform: translateY(-1px);
}






#closeBook {
  position: absolute;
  top: 40px;
  right: 25px;

  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: none;

  background: rgba(230, 217, 193, 0.55); /* wie section-label */
  color: transparent;                   /* X unsichtbar */
  
  cursor: pointer;
  z-index: 50;

  box-shadow: none;
  transition: background 0.25s ease;
}

#closeBook:active {
  background: rgba(230, 217, 193, 0.8);
}





/* ======================================
   Seiten-Container (Page)
   ====================================== */
   .container {
  display: none;

  width: 100%;
  max-width: 420px;
  margin: 0 auto;

  background-image: url('img/page.png');
  background-repeat: repeat-y;
  background-size: 100% auto;
  background-position: top center;

  /* HIER passiert die Magie */
  padding-top: calc(env(safe-area-inset-top) + 0px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 24px);
  padding-left: 16px;
  padding-right: 16px;

  box-sizing: border-box;

  height: auto;

  position: relative;
  z-index: 1;

  overflow-x: hidden;

  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}
   
/* DAS HIER DANACH */
  .container.open {
  display: block;
  opacity: 1;
  transform: translateY(0);
  }



#closeBook:hover {
  background: rgba(150, 100, 50, 0.95);
  transform: scale(1.08);
}
/* Titel im Buch ‚Äì exakt wie Cover */


.page-header {
  position: relative;     /* ehemals env(safe-area-inset-top); */
  padding-top: 16px;
}



.page-header h1 {
  margin-top: -19px;    /* vorher 0 ohne px */
  margin-bottom: 6px;  /* oder je nach Geschmack*/
  font-family: 'Cinzel Decorative', 'Palatino Linotype', serif;
  font-size: 28px;
  font-weight: 600;
  letter-spacing: 0.4px;

  text-align: center;

  color: #5b3a21;  /* edles Dunkelbraun */

  text-shadow:
    0 1px 1px rgba(255,255,255,0.2),
    0 2px 3px rgba(0,0,0,0.35);
}
  
  .container h2 {
  font-size: 18px;        /* vorher gr√∂√üer */
  font-weight: 600;      /* nicht bold */
  color: #5b3a21;        /* exakt Tabellenkopf-Farbe */
  margin: 8px 0 6px;
}


  
/*
  
@media (max-width: 480px) {
 
  .cash-row {
    grid-template-columns: auto 1fr 70px;
  }
}  
*/

.paste-preview {
  display: none;

  margin-top: 10px;
  padding: 10px;

  width: 100%;
  max-width: 310px;
  margin-left: auto;
  margin-right: auto;
   
  min-height: 300px;                   /* Hier kann man das Textfeld in der L√§nge vergr√∂√üern z.B. 120-180 bequem ode 280-320 gro√üz√ºgig Mamu 29.01.2026 */

  box-sizing: border-box;

  background: rgba(255, 255, 255, 0.85);
  border: 1px dashed #aa845c;
  border-radius: 6px;

  font-size: 14px;
  color: #5b3a21;

  text-align: center;
}

.paste-upload {                       /* NEU Mamu 29.01.2026 */
  margin-top: 8px;
  text-align: center;
}


/* =========================
   Depot-Vergleich ‚Äì Abstand
   ========================= */

.depot-compare-wrapper {
  margin-top: 48px;     /* Abstand NACH Depot C */
}

.depot-compare-wrapper h2 {
  padding-bottom: 18px;
}




/* =========================
   MANTRA-SEITE ‚Äì BASISSTIL
   ========================= */

#mantraScreen {

  perspective: 900px;
  perspective-origin: : center;

  position: relative;

  position: fixed;
  inset: 0;

  display: none;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding-top: 150px;

  /* üåø Neuer lebendiger Hintergrund */
  background:
    radial-gradient(
      circle at 50% 35%,
      rgba(255, 200, 120, 0.18),
      rgba(120, 70, 30, 0.55) 45%,
      rgba(45, 25, 15, 0.95) 100%
    ),
    linear-gradient(
      180deg,
      #3b2316,
      #5a3924 40%,
      #7a5233 70%,
      #4a2c1b
    );

  background-blend-mode: screen, normal;

  /* Tiefe & Ruhe */
  box-shadow: inset 0 0 120px rgba(0, 0, 0, 0.55);

  overflow: hidden;
  z-index: 20;
}

.yantra-layer {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  width: 100%;
  height: 100%;

  pointer-events: none; /* nichts anklickbar */
}


#mantraScreen::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 1;

  background:
    radial-gradient(
      circle at 35% 40%,
      rgba(255, 210, 140, 0.18),
      transparent 55%
    ),
    radial-gradient(
      circle at 70% 65%,
      rgba(255, 170, 90, 0.12),
      transparent 60%
    ),
    linear-gradient(
      180deg,
      rgba(255,255,255,0.04),
      rgba(0,0,0,0.15)
    ),
    url("img/mantra-bg-dark.png");

  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  pointer-events: none;
}



.mantra-inner {

 transform: translateZ(40px); 

 position: relative;
 z-index: 2;
 


  text-align: center;
  padding: 40px 20px;
}

.yantra-placeholder {
  width: 220px;
  height: 220px;
  margin: 0 auto 26px auto;

  border-radius: 50%;
  opacity: 0.15;

  background:
    radial-gradient(circle, #caa44d 0%, transparent 60%);
}

.mantra-text {
  font-family: "Noto Serif Devanagari", serif;
  font-size: 24px;
  line-height: 1.6;

  color: #d8c28a;
  letter-spacing: 0.5px;
}

.mantra-top {
  margin-bottom: 50px;   /* Nah am Symbol */
  }
  
.mantra-bottom {
  margin-top: 30px;          /* n√§her ans Symbol als vorher */
  text-align: center;
}

.mantra-line {
  display: block;

  font-size: 22px;           /* bewusst etwas gr√∂√üer */
  line-height: 1.4;

  margin-bottom: 14px;       /* DAS sind deine ‚ÄûAtempausen‚Äú */

  color: #d8c28a;
  letter-spacing: 0.6px;
  opacity: 0.92;
}

/* letzte Zeile bekommt keine extra Pause nach unten */
.mantra-line:last-child {
  margin-bottom: 0;
}
  
  
  
  
  

.yantra-wrapper {
   margin-bottom: 14px;                               /*  margin: 0 auto 36px auto;  */
}

.yantra-symbol {
  width: 380px;
  max-width: 70vw;
  height: auto;
  display: block;
  margin: 0 auto;
  opacity: 0.85;

}

/* =========================
   MANTRA ‚Äì PARALLAX VORBEREITUNG
   ========================= */
.yantra-symbol,
.mantra-top,
.mantra-bottom {
  will-change: transform;
  transition: transform 0.12s linear;
}

</style>
</head>
<body>


<!-- =========================
     ZENTRALES POPUP
     ========================= -->
<div id="popup" class="popup">
  <div class="popup-content">
    <div id="popupLabel">Eingabe</div>
    <input id="popupInput" type="number" step="0.01" />
    <button id="popupConfirm">OK</button>
    <button onclick="closePopup()">Abbrechen</button>
  </div>
</div>



<!-- =========================
     MANTRA-SEITE (hidden)
     ========================= -->
<div id="mantraScreen">
  <div class="mantra-inner">

    <div class="yantra-layer">

      <div class="mantra-text mantra-top">
        ‡•ê ‡§∂‡•ç‡§∞‡•Ä‡§Ç ‡§Æ‡§π‡§æ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡•ç‡§Ø‡•à ‡§®‡§Æ‡§É
      </div>

      <div class="yantra-wrapper">
        <img
          src="img/sri-yantra.png"
          alt="Sri Yantra"
          class="yantra-symbol"
        >
      </div>

     <div class="mantra-text mantra-bottom">
  <span class="mantra-line">Om</span>
  <span class="mantra-line">≈örƒ´·πÅ MahƒÅ Lak·π£myai</span>
  <span class="mantra-line">Nama·∏•</span>
</div>

    </div>

  </div>
</div>

<div id="cover"></div>

<div class="container">
<div class="page-header">
  <h1>Mamu Trading Tagebuch</h1>
  <button id="closeBook" aria-labeltitle="Buch schlie√üen"></button>
</div>

<div class="button-container">
  <button class="button-add" onclick="toggleAdd()">Neues Wertpapier</button>
  <button class="button-update" onclick="toggleUpdate()">Kurse aktualisieren</button>
</div>



<div id="addContainer" class="add-container">


  <input type="text" id="newName" class="edit-input" placeholder="Name" style="text-align:left;">
  <input type="number" id="newAmount" class="edit-input" step="1" placeholder="Anzahl" style="text-align:left;">
  <input type="number" id="newPrice" class="edit-input" step="0.01" placeholder="Kurs (‚Ç¨)" style="text-align:left;">
  <div style="display:flex; gap:5px; margin-top:5px;">
    <label><input type="checkbox" id="addA" checked> Depot A</label>
    <label><input type="checkbox" id="addB" checked> Depot B</label>
    <label><input type="checkbox" id="addC" checked> Depot C</label>
  </div>
  <button class="button-add" onclick="addRow()">Hinzuf√ºgen</button>
  
</div>

<div id="updateContainer" class="update-container"></div>

<!-- NEUES  PROJEKT zus√§tliches Eingabefeld f√ºr tempor√§re Screenshot 29.01.2026 Mamu -->




<div
  id="pastePreview"
  class="paste-preview"
  contenteditable="true"
  spellcheck="false"
  aria-label="Screenshot einf√ºgen">
  
  <span class="paste-hint">
  Hier kannst du sp√§ter einen Screenshot einf√ºgen
  </span>
</div>
<!-- Hier Neu 30.01.21:17 -->

<!-- Screenshot-Controls (nur f√ºr Kurse aktualisieren) -->
<div id="pasteControls" class="paste-upload" style="display:none;">
  <button type="button" class="button-update" onclick="selectScreenshot()">
    Screenshot ausw√§hlen
  </button>

  <input
    type="file"
    id="pasteImageInput"
    accept="image/*"
    style="display:none"
  />
</div>











<!-- NEU 29.01.2026 Mamu -->



<h2><span class="section-label">Depot A</span></h2>

<div class="flex-item">

<!-- <h2>Depot A</h2> -->
<table id="depotA"><tr><th>Name</th><th>Anzahl</th><th>Kurs (‚Ç¨)</th><th>Wert (‚Ç¨)</th><th>Aktion</th></tr></table>

<div class="cash-row">
<!--  <span class="cash-label cash-label--short">Cash</span> -->
  
  <span
  class="cash-label cash-label--short cash-button"
  onclick="openCashPopup('A')"
>
  Cash
</span>
  
<!-- NEU Mamu 27.01.2026 -->
 
<button
  type="button"
  id="cashA"
  class="cash-display"

></button>

<!--
 <input
    type="text"
    id="cashA"
    class="cash-input"   
    readonly
    onclick="openCashPopup('A')"
> 
-->
</div>

<div class="cash-row">
  <span class="cash-label cash-label--long">Gesamtwert</span>
  <input
   type="text"
   id="totalValueA"
   class="total-input"
   readonly
   
>
</div>
</div>

<h2><span class="section-label">Depot B</span></h2>

<div class="flex-item">
<!-- <h2>Depot B</h2> -->
<table id="depotB"><tr><th>Name</th><th>Anzahl</th><th>Kurs (‚Ç¨)</th><th>Wert (‚Ç¨)</th><th>Aktion</th></tr></table>

<div class="cash-row">
<!--  <span class="cash-label cash-label--short">Cash</span> -->
 
 <span
  class="cash-label cash-label--short cash-button"
  onclick="openCashPopup('B')"
>
  Cash
</span>
  
<!-- NEU Mamu 27.01.2026 -->
 
<button
  type="button"
  id="cashB"
  class="cash-display"

></button>
  
<!-- 
  <input
    type="text"
    id="cashB"
    class="cash-input"   
    readonly
    onclick="openCashPopup('B')"
> 
-->
</div>

<div class="cash-row">
  <span class="cash-label cash-label--long">Gesamtwert</span>
  <input
   type="text"
   id="totalValueB"
   class="total-input"
   readonly
>  
</div>
</div>

<h2><span class="section-label">Depot C</span></h2>

<div class="flex-item">
<!-- <h2>Depot C</h2> -->
<table id="depotC"><tr><th>Name</th><th>Anzahl</th><th>Kurs (‚Ç¨)</th><th>Wert (‚Ç¨)</th><th>Aktion</th></tr></table>

<div class="cash-row">
<!--  <span class="cash-label cash-label--short">Cash</span> -->

<span
  class="cash-label cash-label--short cash-button"
  onclick="openCashPopup('C')"
>
  Cash
</span>

<!-- NEU Mamu 27.01.2026 -->
 
<button
  type="button"
  id="cashC"
  class="cash-display"

></button>
  
<!--  
  <input
    type="text"
    id="cashC"
    class="cash-input"   
    readonly
    onclick="openCashPopup('C')"
> 
-->
</div>

<div class="cash-row">
  <span class="cash-label cash-label--long">Gesamtwert</span>
  <input
   type="text"
   id="totalValueC"
   class="total-input"
   readonly
>
</div>
</div>

<!--          Depot ABC Ende              -->

<div class="depot-compare-wrapper">

  <h2><span class="section-label">Depot-Vergleich</span></h2>

  <div class="section-label">
    Differenz (B ‚àí A): <span id="diffAB">0,00 ‚Ç¨</span>
  </div>
  <div class="diff-bar">
    <div id="diffFillAB" class="diff-fill"></div>
  </div>

  <div class="section-label">
    Differenz (C ‚àí A): <span id="diffAC">0,00 ‚Ç¨</span>
  </div>
  <div class="diff-bar">
    <div id="diffFillAC" class="diff-fill"></div>
  </div>

  <div class="section-label">
    Differenz (C ‚àí B): <span id="diffCB">0,00 ‚Ç¨</span>
  </div>
  <div class="diff-bar">
    <div id="diffFillCB" class="diff-fill"></div>
  </div>

</div>



<div class="footer-actions">

  <button
    type="button"
    class="button-export"
    onclick="exportAppData()"
  >
    Speichern<br><small>JSON</small>
  </button>

  <button
    type="button"
    class="button-import"
    onclick="triggerImport()"
  >
    Laden<br><small>JSON</small>
  </button>

  <button
    type="button"
    class="button-danger"
    onclick="clearAll()"
  >
    Alles<br><small>l√∂schen</small>
  </button>

</div>


<input
  type="file"
  id="importFileInput"
  accept="application/json"
  style="display:none"
>





<script>



let appState = "cover"; 
// m√∂gliche Werte: "cover" | "mantra" | "page"

function formatNumber(num){ return Number(num).toLocaleString('de-DE',{minimumFractionDigits:2, maximumFractionDigits:2}); }



const STORAGE_KEY = "mamu-trading-app-data";

// ================================
// APP-DATEN SPEICHERN
// ================================
function saveAppData() {
  appData.meta.lastSaved = new Date().toISOString();
  localStorage.setItem(STORAGE_KEY, JSON.stringify(appData));
}

// ================================
// APP-DATEN LADEN
// ================================
function loadAppData() {
  const raw = localStorage.getItem(STORAGE_KEY);
  if (!raw) return; // erstes √ñffnen ‚Üí nichts zu laden

  try {
    const parsed = JSON.parse(raw);
    if (parsed && parsed.depots && parsed.cash) {
      appData = parsed;

      // Referenzen sauber neu setzen
      depotA = appData.depots.A;
      depotB = appData.depots.B;
      depotC = appData.depots.C;
    }
  } catch (e) {
    console.warn("Daten konnten nicht geladen werden:", e);
  }
}



// ================================
// ZENTRALE APP-DATEN
// ================================
let appData = {
  depots: {
    A: [],
    B: [],
    C: []
  },
  cash: {
    A: 0,
    B: 0,
    C: 0
  },
  meta: {
    lastSaved: null,
    version: 1
  }
};



// Alte Variablen zeigen nur noch auf appData
let depotA = appData.depots.A;
let depotB = appData.depots.B;
let depotC = appData.depots.C;



// ================================
// CASH-DATEN
// ================================
appData.cash = {
  A: 0,
  B: 0,
  C: 0
};



// üîí Sicherstellen, dass Depot-Arrays immer existieren
["A","B","C"].forEach(d => {
  if (!Array.isArray(appData.depots[d])) {
    appData.depots[d] = [];
  }
});





function calcTotals(){
 
  console.log("calcTotals START");  
  
  function parseCash(id){ return parseFloat((document.getElementById(id).dataset.value||"0"))||0; }
  let totalA=parseCash("cashA"), totalB=parseCash("cashB"), totalC=parseCash("cashC");
  depotA.forEach(i=>totalA+=i.amount*i.price);
  depotB.forEach(i=>totalB+=i.amount*i.price);
  depotC.forEach(i=>totalC+=i.amount*i.price);




  let diffAB=totalB-totalA, diffAC=totalC-totalA, diffCB=totalC-totalB;

  document.getElementById("diffAB").innerText=formatNumber(diffAB)+" ‚Ç¨";
  document.getElementById("diffAC").innerText=formatNumber(diffAC)+" ‚Ç¨";
  document.getElementById("diffCB").innerText=formatNumber(diffCB)+" ‚Ç¨";

  function setBar(diff,id,total1,total2){
    let bar=document.getElementById(id);
    let maxTotal=Math.max(total1,total2,1);
    let percent=(Math.abs(diff)/maxTotal)*(100/0.025);
    if(percent>100) percent=100;
    bar.style.width=percent+"%";

    if(diff>=0) bar.style.background= "linear-gradient(to right, #a0e6a0, #008000)";
    else bar.style.background= "linear-gradient(to right, #e68a8a, #b30000)";
    let pct= ((Math.abs(diff)/maxTotal)*100).toFixed(1);
    bar.innerText=pct+"%";
  }

  setBar(diffAB,"diffFillAB",totalA,totalB);
  setBar(diffAC,"diffFillAC",totalA,totalC);
  setBar(diffCB,"diffFillCB",totalB,totalC);
  
/* Dieser Block berechnet den Gesamtwert und zeigt ihn im Zahlenfeld an */  
  
  const totalInputA = document.getElementById("totalValueA");
if (totalInputA) {
  totalInputA.value = formatNumber(totalA);
}
console.log("totalValueA =", totalInputA ? totalInputA.value : "NICHT GEFUNDEN");

  const totalInputB = document.getElementById("totalValueB");
if (totalInputB) {
  totalInputB.value = formatNumber(totalB);
}
console.log("totalValueB =", totalInputB ? totalInputB.value : "NICHT GEFUNDEN");

  const totalInputC = document.getElementById("totalValueC");
if (totalInputC) {
  totalInputC.value = formatNumber(totalC);
}

console.log("totalValueC =", totalInputC ? totalInputC.value : "NICHT GEFUNDEN");

console.log("calcTotals END");
}

function updateAll() {
  saveAppData();
  renderTable();
  calcTotals();
}

function exportAppData() {
  const dataStr = JSON.stringify(appData, null, 2);
  const blob = new Blob([dataStr], { type: "application/json" });

  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");

  const date = new Date().toISOString().slice(0, 10);
  a.href = url;
  a.download = `mamu-trading-backup-${date}.json`;

  document.body.appendChild(a);
  a.click();

  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}




function triggerImport() {
  const input = document.getElementById("importFileInput");
  if (input) input.click();
}






function renderTable(){
  function fillTable(dep,tableId){
    let table=document.getElementById(tableId);
    table.innerHTML="<tr><th>Name</th><th>Anzahl</th><th>Kurs (‚Ç¨)</th><th>Wert (‚Ç¨)</th><th>Aktion</th></tr>";
    dep.forEach((item,i)=>{
      let row=table.insertRow();
      let nameCell=row.insertCell(); nameCell.innerText=item.name; nameCell.className="name-cell";

      let amtCell=row.insertCell();
      let inputAmt=document.createElement("input");
      inputAmt.type="number"; inputAmt.step="1"; inputAmt.className="amount-input"; 
      inputAmt.value=item.amount;
      inputAmt.onclick=e=>{ openAmountPopup(i, tableId); e.target.blur(); };
      amtCell.appendChild(inputAmt);

      let priceCell=row.insertCell();
      let inputPrice=document.createElement("input");
      inputPrice.type="number"; inputPrice.step="0.01"; inputPrice.className="price-input"; 
      inputPrice.onchange=e=>{item.price=parseFloat(e.target.value); saveAppData(); calcTotals(); renderTable();};
      inputPrice.value=item.price;
      priceCell.appendChild(inputPrice);

      let valueCell=row.insertCell(); valueCell.innerText=formatNumber(item.amount*item.price);

      let actionCell=row.insertCell();
      let delBtn=document.createElement("button"); delBtn.innerText="ENTF"; delBtn.className="button-del";
      delBtn.onclick=()=>{ showDeletePopup(item,dep); };
      actionCell.appendChild(delBtn);
    });
  }
  fillTable(depotA,"depotA");
  fillTable(depotB,"depotB");
  fillTable(depotC,"depotC");
  calcTotals();
}

let deleteItem=null, deleteDepot=null;
function showDeletePopup(item,depot){
  deleteItem=item; deleteDepot=depot;
  document.getElementById("popupLabel").innerText="Willst du diese Aktie wirklich l√∂schen?";
  document.getElementById("popupInput").style.display="none";
  document.getElementById("popupConfirm").onclick=function(){
    if(deleteItem && deleteDepot){
      const index=deleteDepot.indexOf(deleteItem);
      if(index>-1){ deleteDepot.splice(index,1); saveAppData(); renderTable(); }
    }
    closePopup();
  };
  document.getElementById("popup").style.display="flex";
}

function openAmountPopup(index, tableId) {

  const depotKey =
    tableId === "depotA" ? "A" :
    tableId === "depotB" ? "B" :
    "C";

  document.getElementById("popupLabel").innerText =
    "Anzahl √§ndern";

  document.getElementById("popupInput").style.display = "block";
  document.getElementById("popupInput").value = "";

  document.getElementById("popupConfirm").onclick = function () {
    const val = parseFloat(document.getElementById("popupInput").value);

    if (!isNaN(val)) {
      appData.depots[depotKey][index].amount = val;
      updateAll();   // üí• DAS ist jetzt stabil
    }

    closePopup();
  };

  document.getElementById("popup").style.display = "flex";
}

let cashDepot=null;
function openCashPopup(depot){
  cashDepot=depot;
  document.getElementById("popupLabel").innerText="Cash f√ºr Depot "+depot;
  document.getElementById("popupInput").style.display="block";
  document.getElementById("popupInput").value="";
  document.getElementById("popupConfirm").onclick=function(){
    let val=parseFloat(document.getElementById("popupInput").value);
    if(!isNaN(val)){
	
	  appData.cash[cashDepot] = val;
	  
      document.getElementById("cash"+cashDepot).dataset.value=val;
      document.getElementById("cash"+cashDepot).innerText =formatNumber(val);
      saveAppData(); calcTotals();
    }
    closePopup();
  };
  document.getElementById("popup").style.display="flex";
}

function closePopup(){ document.getElementById("popup").style.display="none"; }

function toggleAdd(){
  const container=document.getElementById("addContainer");
  container.style.display=container.style.display==="flex"?"none":"flex";
}

function toggleUpdate() {
  const container = document.getElementById("updateContainer");
  const pastePreview = document.getElementById("pastePreview");
  const pasteUpload = document.querySelector(".paste-upload"); // Screenshot-Button

  // Aktuellen Zustand pr√ºfen
  const isOpen = container.style.display === "flex";

  // ==========================
  // SCHLIESSEN
  // ==========================
  if (isOpen) {
    container.style.display = "none";

    if (pastePreview) {
      pastePreview.style.display = "none";
      pastePreview.innerHTML = `
        <span class="paste-hint">
          Hier kannst du sp√§ter einen Screenshot einf√ºgen
        </span>
      `;
    }

    if (pasteUpload) {
      pasteUpload.style.display = "none";
    }

    return;
  }

  // ==========================
  // √ñFFNEN
  // ==========================
  container.innerHTML = "";
  container.style.display = "flex";

  let allNames = [];
  [depotA, depotB, depotC].forEach(dep => {
    dep.forEach(item => {
      if (!allNames.includes(item.name)) allNames.push(item.name);
    });
  });

  allNames.forEach(name => {
    let div = document.createElement("div");
    div.className = "update-row";

    let label = document.createElement("label");
    label.innerText = name;
    label.dataset.symbol = name;

    let input = document.createElement("input");
    input.type = "number";
    input.step = "0.01";
    input.className = "edit-input";

    div.appendChild(label);
    div.appendChild(input);
    container.appendChild(div);
  });

  // ==========================
  // AKTUALISIEREN-BUTTON
  // ==========================
  let btn = document.createElement("button");
  btn.className = "button-update";
  btn.innerText = "Aktualisieren";

  btn.onclick = () => {
    let rows = container.querySelectorAll(".update-row");
	
   rows.forEach(row => {
  const name = row.querySelector("label").dataset.symbol;
  const val = parseFloat(row.querySelector("input").value);

  if (isNaN(val)) return;

  [depotA, depotB, depotC].forEach(dep => {
    dep.forEach(item => {
      if (item.name === name) {
        item.price = val;
      }
    });
  });
});

    saveAppData();
    renderTable();

    // üîÅ sauber schlie√üen inkl. Screenshot-Reset
    toggleUpdate();
  };

  container.appendChild(btn);

  // ==========================
  // Screenshot-Bereich EIN
  // ==========================
  if (pastePreview) pastePreview.style.display = "block";
  if (pasteUpload) pasteUpload.style.display = "block";
}
  
  
  
  

 




function addRow(){
  let name=document.getElementById("newName").value;
  let amount=parseFloat(document.getElementById("newAmount").value);
  let price=parseFloat(document.getElementById("newPrice").value);
  if(!name||isNaN(amount)||isNaN(price)) return;
  if(document.getElementById("addA").checked) depotA.push({name,amount,price});
  if(document.getElementById("addB").checked) depotB.push({name,amount,price});
  if(document.getElementById("addC").checked) depotC.push({name,amount,price});
  saveAppData(); renderTable();
  document.getElementById("newName").value="";
  document.getElementById("newAmount").value="";
  document.getElementById("newPrice").value="";
  toggleAdd();
}

function clearAll(){
  if(confirm("Alle Daten l√∂schen?")){
    depotA=[]; depotB=[]; depotC=[];
    ["cashA","cashB","cashC"].forEach(id=>{document.getElementById(id).dataset.value="0"; document.getElementById(id).value=formatNumber(0);});
    saveAppData(); renderTable();
  }
}



document.getElementById("cover").onclick = function () {


  const mantraScreen = document.getElementById("mantraScreen");
  if (mantraScreen) {
    mantraScreen.style.display = "flex";
	mantraScreen.style.opacity = "1";      // wichtiger reset
  }


 

  if (appState !== "cover") return;

  appState = "mantra";

  const cover = document.getElementById("cover");
  const mantra = document.getElementById("mantraScreen");

  cover.style.opacity = "0";

  setTimeout(() => {
    cover.style.display = "none";

    if (mantra) {
      mantra.style.display = "flex";
	  
	  
	  
    }
  }, 500);
};


document.getElementById("closeBook").addEventListener("click", function () {

 appState = "cover";                 // Das ist der Fix

  const container = document.querySelector(".container");
  const cover = document.getElementById("cover");

  container.classList.remove("open");
  container.style.opacity = "0";

  setTimeout(() => {
    container.style.display = "none";

    cover.style.display = "block";
    requestAnimationFrame(() => {
      cover.style.transform = "scale(1)";
      cover.style.opacity = "1";
    });

    document.body.classList.remove("page-open");
    document.body.classList.add("cover-open");
  }, 500);
});

function togglePastePreview(show) {
  const preview = document.getElementById("pastePreview");
  if (!preview) return;

  preview.style.display = show ? "block" : "none";
}
 
 const pastePreview = document.getElementById("pastePreview");

if (pastePreview) {

  const hideHint = () => {
    const hint = pastePreview.querySelector(".paste-hint");
    if (hint) {
      hint.style.display = "none";
    }
  };

  // F√ºr Desktop & Texteingaben
  pastePreview.addEventListener("input", hideHint);

  // WICHTIG: F√ºr iOS / Bilder / Screenshot-Einf√ºgen
  pastePreview.addEventListener("paste", () => {
    requestAnimationFrame(hideHint);
  });
}
 
 

function selectScreenshot() {
  const input = document.getElementById("pasteImageInput");
  if (input) input.click();
}

const imageInput = document.getElementById("pasteImageInput");        // NEU Mamu 2901
                                                                      // const pastePreview = document.getElementById("pastePreview");

if (imageInput && pastePreview) {
  imageInput.addEventListener("change", () => {
    const file = imageInput.files[0];
    if (!file) return;

    const img = document.createElement("img");
    img.style.maxWidth = "100%";
    img.style.height = "auto";
    img.style.display = "block";
    img.style.margin = "0 auto";

    img.src = URL.createObjectURL(file);

    // Hinweistext entfernen
    pastePreview.innerHTML = "";
    pastePreview.appendChild(img);
  });
}

                                                    


// ================================
// SCHRITT 4 ‚Äì Paste-Handler
// ================================

const pasteArea = document.getElementById("pastePreview");

if (pasteArea) {
  pasteArea.addEventListener("paste", function (event) {
    event.preventDefault();

    const clipboard = event.clipboardData;
    if (!clipboard) return;

    // Hint ausblenden, sobald etwas eingef√ºgt wird
    const hint = pasteArea.querySelector(".paste-hint");
    if (hint) hint.style.display = "none";

    // Pr√ºfen, ob ein Bild enthalten ist
    for (let item of clipboard.items) {
      if (item.type.startsWith("image")) {
        const file = item.getAsFile();
        const reader = new FileReader();

        reader.onload = function (e) {
          const img = document.createElement("img");
          img.src = e.target.result;

          // WICHTIG: Bild an Container anpassen
          img.style.maxWidth = "100%";
          img.style.height = "auto";
          img.style.display = "block";
          img.style.margin = "10px auto";

          pasteArea.appendChild(img);
        };

        reader.readAsDataURL(file);
        return;
      }
    }

    // Falls es KEIN Bild ist ‚Üí normalen Text einf√ºgen
    const text = clipboard.getData("text/plain");
    if (text) {
      document.execCommand("insertText", false, text);
    }
  });
}



// =========================
// STARTZUSTAND FESTLEGEN
// =========================

document.addEventListener("DOMContentLoaded", () => {

  // =========================
  // MIGRATION: Alte Daten ‚Üí neue AppData-Struktur
  // =========================
  const hasNewAppData = localStorage.getItem(STORAGE_KEY);

  if (!hasNewAppData) {
    const oldDepotA = JSON.parse(localStorage.getItem("depotA") || "[]");
    const oldDepotB = JSON.parse(localStorage.getItem("depotB") || "[]");
    const oldDepotC = JSON.parse(localStorage.getItem("depotC") || "[]");

    const oldCashA = parseFloat(localStorage.getItem("cashA") || "0");
    const oldCashB = parseFloat(localStorage.getItem("cashB") || "0");
    const oldCashC = parseFloat(localStorage.getItem("cashC") || "0");

    const hasOldData =
      oldDepotA.length || oldDepotB.length || oldDepotC.length ||
      oldCashA || oldCashB || oldCashC;

    if (hasOldData) {
      appData.depots.A = oldDepotA;
      appData.depots.B = oldDepotB;
      appData.depots.C = oldDepotC;

      appData.cash.A = oldCashA;
      appData.cash.B = oldCashB;
      appData.cash.C = oldCashC;

      saveAppData();
      console.log("‚úÖ Alte Daten erfolgreich migriert");
    }
  }

  loadAppData();

  ["A","B","C"].forEach(d => {
    const el = document.getElementById("cash" + d);
    if (!el) return;
    const val = appData.cash[d] || 0;
    el.dataset.value = val;
    el.innerText = formatNumber(val);
  });

  appState = "cover";

  const mantra = document.getElementById("mantraScreen");
  if (mantra) {
    mantra.style.display = "none";
  }

  // ‚úÖ IMPORT-BLOCK GEH√ñRT HIER REIN
  const importInput = document.getElementById("importFileInput");
  if (importInput) {
    importInput.addEventListener("change", function () {
      const file = this.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        try {
          const imported = JSON.parse(e.target.result);

          if (!imported.depots || !imported.cash) {
            alert("Ung√ºltige Datei ‚Äì kein g√ºltiges App-Backup.");
            return;
          }

          appData = imported;
          depotA = appData.depots.A || [];
          depotB = appData.depots.B || [];
          depotC = appData.depots.C || [];

          ["A","B","C"].forEach(d => {
            const el = document.getElementById("cash" + d);
            if (!el) return;
            const val = appData.cash[d] || 0;
            el.dataset.value = val;
            el.innerText = formatNumber(val);
          });

          saveAppData();
          renderTable();
          alert("Daten erfolgreich importiert ‚úÖ");
        } catch (err) {
          alert("Fehler beim Importieren der Datei.");
          console.error(err);
        }
      };

      reader.readAsText(file);
    });
  }

});


// ===============================
// iOS Motion aktivieren
// ===============================

async function enableMotion() {
  if (typeof DeviceOrientationEvent !== "undefined" &&
      typeof DeviceOrientationEvent.requestPermission === "function") {

    try {
      const response = await DeviceOrientationEvent.requestPermission();
      if (response === "granted") {
        startMotionEffect();
      }
    } catch (err) {
      console.log("Motion Permission abgelehnt oder Fehler:", err);
    }

  } else {
    // Android oder Desktop
    startMotionEffect();
  }
}

function startMotionEffect() {
  window.addEventListener("deviceorientation", (event) => {
    const beta = event.beta;
    const gamma = event.gamma;

    const rotateX = beta ? beta / 20 : 0;
    const rotateY = gamma ? gamma / 20 : 0;

    const elements = document.querySelectorAll(
      ".yantra-symbol, .mantra-top, .mantra-bottom"
    );

    elements.forEach(el => {
      el.style.transform = `
        perspective(900px)
        rotateX(${rotateX}deg)
        rotateY(${rotateY}deg)
      `;
    });
  });
}


const mantraScreen = document.getElementById("mantraScreen");

if (mantraScreen) {
  mantraScreen.onclick = function () {

    
    if (appState !== "mantra") return;

    enableMotion();

    appState = "page";

    mantraScreen.style.opacity = "0";

    const container = document.querySelector(".container");

    setTimeout(() => {
      mantraScreen.style.display = "none";

      document.body.classList.remove("cover-open");
      document.body.classList.add("page-open");

      container.style.display = "block";

      requestAnimationFrame(() => {
        container.classList.add("open");
        container.style.opacity = "1";
      });

      renderTable();
    }, 400);
  };
}


/* ================================
   MANTRA PARALLAX ‚Äì STUFE 2
   ================================ */

(function () {
  const symbol = document.querySelector(".yantra-symbol");
  const topText = document.querySelector(".mantra-top");
  const bottomText = document.querySelector(".mantra-bottom");

  if (!symbol || !topText || !bottomText) return;

  // Feinheit der Bewegung (klein halten!)
  const MAX_MOVE = 10; // px

  function applyParallax(x, y) {
    symbol.style.transform =
      `translate3d(${x * 0.6}px, ${y * 0.6}px, 0)`;
    topText.style.transform =
      `translate3d(${x * 0.3}px, ${y * 0.3}px, 0)`;
    bottomText.style.transform =
      `translate3d(${x * 0.45}px, ${y * 0.45}px, 0)`;
  }

  // üñ±Ô∏è Desktop: Mausbewegung
  window.addEventListener("mousemove", (e) => {
    const cx = window.innerWidth / 2;
    const cy = window.innerHeight / 2;

    const x = ((e.clientX - cx) / cx) * MAX_MOVE;
    const y = ((e.clientY - cy) / cy) * MAX_MOVE;

    applyParallax(x, y);
  });

  // üì± Mobile: Gyro (iPhone)
  window.addEventListener("deviceorientation", (e) => {
    if (e.beta === null || e.gamma === null) return;

    const x = Math.max(-MAX_MOVE, Math.min(MAX_MOVE, e.gamma));
    const y = Math.max(-MAX_MOVE, Math.min(MAX_MOVE, e.beta));

    applyParallax(x, y);
  });
})();

</script>
</body>
</html>
